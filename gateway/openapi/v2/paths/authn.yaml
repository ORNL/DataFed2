basic:
  post:
    summary: Authenticate user by UID and password.
    description: Authenticate user by UID and password and receive API access and refresh tokens on success.
    tags:
      - authentication
    security: [] # No auth required for this method
    parameters:
      - name: session_cookie
        in: query
        description: Flag to set access token as a session cookie. Cannot be used with no_expire flag.
        required: false
        schema:
          type: boolean
          default: false
      - name: no_expire
        in: query
        description: Flag to request non-expiring access token. No refresh token will be provided.
        required: false
        schema:
          type: boolean
          default: false
    requestBody:
      content:
        application/json:
          schema:
            type: object
            properties:
              uid:
                type: string
                description: DataFed user identifier
              password:
                type: string
                description: DataFed User password
            required:
              - uid
              - password
    responses:
      '200':
        description: API access and refresh tokens
        content:
          application/json:
            schema:
              $ref: '../components/schemas/token_grant.yaml'
      '400':
        $ref: "../components/responses/default.yaml#/nack"
      '401':
        description: Authorization failed - invalid UID or password.

token_exchange:
  post:
    summary: Exchange Globus access token for DataFed access token.
    description: Exchange a Globus access token with DataFed scope for DataFed API access and refresh tokens.
    tags:
      - authentication
    security: [] # No auth required for this method
    parameters:
      - name: session_cookie
        in: query
        description: Flag to set API session cookie
        required: false
        schema:
          type: boolean
    requestBody:
      content:
        application/json:
          schema:
            type: object
            required:
              - access_token
            properties:
              access_token:
                type: string
                description: Globus access token
    responses:
      '200':
        description: API access and refresh tokens
        content:
          application/json:
            schema:
              $ref: '../components/schemas/token_grant.yaml'
      '400':
        $ref: "../components/responses/default.yaml#/nack"
      '401':
        description: Authorization failed - invalid token.

logout:
  post:
    summary: Logout.
    description: Logout.
    tags:
      - authentication
    responses:
      '200':
        $ref: '../components/responses/default.yaml#/ack'
      '401':
        $ref: '../components/responses/default.yaml#/noauth'

token_revoke:
  post:
    summary: Revoke an access token.
    description: Revoke an access token.
    tags:
      - authentication
    responses:
      '200':
        $ref: '../components/responses/default.yaml#/ack'
      '400':
        $ref: "../components/responses/default.yaml#/nack"
      '401':
        $ref: '../components/responses/default.yaml#/noauth'
